 AS V1.42 Beta [Bld 118] - source file disc.asm - page 1 - 10/3/2020 21:30:08


       1/       0 :                     ; ====================================================================
       2/       0 :                     ; GennySaturn
       3/       0 :                     ;
       4/       0 :                     ; (C) GF64
       5/       0 :                     ; ====================================================================
       6/       0 :                      		
       7/       0 :                     ; ====================================================================
       8/       0 :                     ; ------------------------------------------------
       9/       0 :                     ; Header
      10/       0 :                     ; ------------------------------------------------
      11/       0 :                     
      12/       0 :                     		include "system/macros.asm"
(1)    1/       0 :                     ; ===========================================================================
(1)    2/       0 :                     ; ----------------------------------------------------------------
(1)    3/       0 :                     ; MACROS
(1)    4/       0 :                     ; ----------------------------------------------------------------
(1)    5/       0 :                     
(1)    6/       0 :                     ; --------------------------------------------------------
(1)    7/       0 :                     ; AS Main settings
(1)    8/       0 :                     ; --------------------------------------------------------
(1)    9/       0 :                     
(1)   10/       0 :                     		!org 0				; Start at 0
(1)   11/       0 :                     		cpu SH7600			; should be SH7095 but ASL doesn't have it, this is close enough
(1)   12/       0 :                     		padding	off			; Dont pad dc.b
(1)   13/       0 :                     		listing purecode		; Want listing file, but only the final code in expanded macros
(1)   14/       0 :                     		supmode on 			; Supervisor mode
(1)   15/       0 :                     		dottedstructs off		; If needed
(1)   16/       0 :                     		page 0
(1)   17/       0 :                     
      13/       0 : 5345 4741 2053 4547  		dc.b "SEGA SEGASATURN "			; Hardware Identifier
                    4153 4154 5552 4E20 
      14/      10 : 5345 4741 2048 4F4D  		dc.b "SEGA HOMEBREW   "			; Maker ID
                    4542 5245 5720 2020 
      15/      20 : 542D 3939 3930 3147  		dc.b "T-99901G  "			; Serial
                    2020                
      16/      2A : 5630 2E30 3031       		dc.b "V0.001"				; Version
      17/      30 : 3230 3139 3034 3035  		dc.b "20190405"				; Release date
      18/      38 : 4344 2D31 2F31 2020  		dc.b "CD-1/1  "				; Number of discs
      19/      40 : 4A55 4554 2020 2020  		dc.b "JUET            "			; Regions
                    2020 2020 2020 2020 
      20/      50 : 4A4D 2020 2020 2020  		dc.b "JM              "			; Compatible Peripheral
                    2020 2020 2020 2020 
      21/      60 : 5449 544C 4520 474F  		dc.b "TITLE GOES HERE "			; Title
                    4553 2048 4552 4520 
      22/      70 :                      		align $E0
      23/      E0 : 0000 1800            		dc.l $1800;(IP_End-IP_Start)		; IP Size
      24/      E4 : 0000 0000            		dc.l 0					; Master stack (default: $6001FFF)
      25/      E8 : 0000 0000            		dc.l 0					; Slave stack (default: $6000FFF)
      26/      EC : 0000 0000            		dc.l 0
      27/      F0 : 0600 4000            		dc.l $06004000
      28/      F4 :                      		align $100
      29/     100 :                      		binclude "system/security.bin"
      30/     E80 :                      		
      31/     E80 :                     ; ====================================================================
      32/     E80 :                     ; ------------------------------------------------
      33/     E80 :                     ; This file loader
      34/     E80 :                     ; ------------------------------------------------
      35/     E80 :                     
      36/     E80 :                     IP_Start:
      37/     E80 :                      		binclude "system/ip_old.bin"
      38/    12FC :                     ;  		include "system/ip.asm"
      39/    12FC :                     IP_End:
      40/    12FC :                     
      41/    12FC :                     ; ====================================================================
      42/    12FC :                     ; ------------------------------------------------
      43/    12FC :                     ; ISO Filesystem
      44/    12FC :                     ; ------------------------------------------------
      45/    12FC :                     
      46/    12FC :                     		align $8000
      47/    8000 :                     		binclude "fs_temp.bin",$8000,$4000
      48/    C000 :                      		include "game/main.asm"
(1)    1/    C000 :                     ; ====================================================================
(1)    2/    C000 :                     ; ------------------------------------------------
(1)    3/    C000 :                     ; Equs
(1)    4/    C000 :                     ; ------------------------------------------------
(1)    5/    C000 :                     
(1)    6/    C000 : =$25E00000          VDP2_RAM	equ	$20000000|$05E00000
(1)    7/    C000 : =$25F00000          VDP2_CRAM	equ	$20000000|$05F00000
(1)    8/    C000 : =$25F80000          VDP2_Regs	equ	$20000000|$05F80000
(1)    9/    C000 : =$20200000          LWRAM		equ	$20000000|$200000
(1)   10/    C000 :                     
(1)   11/    C000 : =$60FFC13           CONTROLLER	equ 	$60FFC00+$13
(1)   12/    C000 :                     
(1)   13/    C000 :                     ; ------------------------------------------------
(1)   14/    C000 :                     ; IP
(1)   15/    C000 :                     ; ------------------------------------------------
(1)   16/    C000 :                     
(1)   17/ 6004000 :                     		phase $06004000
(1)   18/ 6004000 :                     		
(1)   19/ 6004000 :                     ; ----------------------------
(1)   20/ 6004000 :                     
(1)   21/ 6004000 : E100                     		mov.l	#0,r1
(1)   22/ 6004002 : D215                     		mov.l	#VDP2_RAM+$6000,r2
(1)   23/ 6004004 : 9336                     		mov.l	#$800,r3
(1)   24/ 6004006 :                     .cleanup:
(1)   25/ 6004006 : 2211                     		mov.w	r1,@r2
(1)   26/ 6004008 : 7202                     		add 	#2,r2
(1)   27/ 600400A : 4310                     		dt	r3
(1)   28/ 600400C : 8BFB                     		bf	.cleanup
(1)   29/ 600400E :                     
(1)   30/ 600400E :                     ; ----------------------------
(1)   31/ 600400E :                     
(1)   32/ 600400E :                     ;       		mov	#%1000000100000000,r1
(1)   33/ 600400E :                     ;      		mov	#VDP2_Regs,r2
(1)   34/ 600400E :                     ;     		mov.w	r1,@r2
(1)   35/ 600400E :                     ;       		mov	#%1000000000000000,r1
(1)   36/ 600400E :                     ;      		mov	#VDP2_Regs+$6,r2
(1)   37/ 600400E :                     ;     		mov.w	r1,@r2
(1)   38/ 600400E :                     ;        		mov	#%1000000000000000,r1
(1)   39/ 600400E :                     ;       		mov	#VDP2_Regs+$E,r2
(1)   40/ 600400E :                     ;      		mov.w	r1,@r2
(1)   41/ 600400E :                     ;      		mov	#%0001,r1			;LAYER DISPLAY
(1)   42/ 600400E :                     ;      		mov	#VDP2_Regs+$20,r2
(1)   43/ 600400E :                     ;     		mov.w	r1,@r2
(1)   44/ 600400E :                     ;      		mov	#%0000000000010001,r1
(1)   45/ 600400E :                     ;      		mov	#VDP2_Regs+$28,r2
(1)   46/ 600400E :                     ;     		mov.w	r1,@r2
(1)   47/ 600400E :                     ;      		mov	#-1,r1
(1)   48/ 600400E :                     ;     		mov	#VDP2_Regs+$110,r2
(1)   49/ 600400E :                     ;    		mov.w	r1,@r2
(1)   50/ 600400E :                        		
(1)   51/ 600400E :                     ; ----------------------------
(1)   52/ 600400E :                     
(1)   53/ 600400E :                     		;PAL
(1)   54/ 600400E : D113                   		mov.l	#pal_test,r1
(1)   55/ 6004010 : 6011                   		mov.w	@r1,r0
(1)   56/ 6004012 : D213                   		mov	#VDP2_RAM+$8000,r2
(1)   57/ 6004014 : 2201                   		mov.w	r0,@r2
(1)   58/ 6004016 : D213                    		mov.l	#VDP2_CRAM,r2
(1)   59/ 6004018 : E310                    		mov.l	#$10,r3
(1)   60/ 600401A :                     .palload:
(1)   61/ 600401A : 6015                    		mov.w	@r1+,r0
(1)   62/ 600401C : 2201                    		mov.w	r0,@r2
(1)   63/ 600401E : 7202                    		add 	#2,r2
(1)   64/ 6004020 : 4310                    		dt	r3
(1)   65/ 6004022 : 8BFA                    		bf	.palload
(1)   66/ 6004024 :                         		
(1)   67/ 6004024 :                         		;ART
(1)   68/ 6004024 : D110                   		mov.l	#art_test,r1
(1)   69/ 6004026 : D211                    		mov.l	#VDP2_RAM,r2
(1)   70/ 6004028 : 6316                    		mov.l	@r1+,r3
(1)   71/ 600402A :                     .artload:
(1)   72/ 600402A : 6016                    		mov.l	@r1+,r0
(1)   73/ 600402C : 2202                    		mov.l	r0,@r2
(1)   74/ 600402E : 7204                    		add 	#4,r2
(1)   75/ 6004030 : 4310                    		dt	r3
(1)   76/ 6004032 : 8BFA                    		bf	.artload
(1)   77/ 6004034 :                        		
(1)   78/ 6004034 :                        		;MAP
(1)   79/ 6004034 : E000                   		mov	#0,r0
(1)   80/ 6004036 : D10E                   		mov.l	#map_test,r1
(1)   81/ 6004038 : D507                   		mov.l	#VDP2_RAM+$6000,r5
(1)   82/ 600403A :                        		
(1)   83/ 600403A : E31C                   		mov.l	#28,r3
(1)   84/ 600403C :                     .mapyload:
(1)   85/ 600403C : E428                		mov.l	#40,r4
(1)   86/ 600403E : 6253                   		mov.l	r5,r2
(1)   87/ 6004040 :                     .mapxload:
(1)   88/ 6004040 : 6015                   		mov.w	@r1+,r0
(1)   89/ 6004042 : 2201                   		mov.w	r0,@r2
(1)   90/ 6004044 : 7202                   		add 	#2,r2
(1)   91/ 6004046 : 4410                   		dt	r4
(1)   92/ 6004048 : 8BFA                   		bf	.mapxload
(1)   93/ 600404A :                        		
(1)   94/ 600404A : 9014                   		mov.l	#128,r0
(1)   95/ 600404C : 350C                   		add	r0,r5
(1)   96/ 600404E : 4310                   		dt	r3
(1)   97/ 6004050 : 8BF4                   		bf	.mapyload
(1)   98/ 6004052 :                        		
(1)   99/ 6004052 :                     ; ----------------------------
(1)  100/ 6004052 :                     
(1)  101/ 6004052 : E100                    		mov	#0,r1
(1)  102/ 6004054 :                     .Loop:
(1)  103/ 6004054 :                     ;   		bsr	VSync
(1)  104/ 6004054 :                     ;     		nop
(1)  105/ 6004054 :                       		
(1)  106/ 6004054 :                     ;        		mov.l	#VDP2_Regs+$70,r2		;Horizontal
(1)  107/ 6004054 :                     ;       		mov.w	r1,@r2
(1)  108/ 6004054 :                     ;        		mov.l	#VDP2_Regs+$74,r2		;Vertical
(1)  109/ 6004054 :                     ;       		mov.w	r1,@r2
(1)  110/ 6004054 :                     ;     		add 	#1,r1
(1)  111/ 6004054 :                         		
(1)  112/ 6004054 : AFFE                 		bra	.Loop
(1)  113/ 6004056 : 0009                   		nop
(1)  114/ 6004058 :                     		align 4
(1)  115/ 6004058 : 25E0 6000 0600 4088 		ltorg
                    25E0 8000 25F0 0000 
                    0600 40A8 25E0 0000 
                    0600 578C 0800 0080 
(1)  116/ 6004078 :                        		
(1)  117/ 6004078 :                     ; ----------------------------
(1)  118/ 6004078 :                     ; VSync, i think.
(1)  119/ 6004078 :                     ; ----------------------------
(1)  120/ 6004078 :                     
(1)  121/ 6004078 :                     VSync:
(1)  122/ 6004078 : DE02                		mov.l	#VDP2_Regs+4,r14
(1)  123/ 600407A : 60E1                		mov.w	@r14,r0
(1)  124/ 600407C : C808                		tst	#%1000,r0
(1)  125/ 600407E : 89FB                		bt	VSync
(1)  126/ 6004080 :                     		
(1)  127/ 6004080 : 000B                		rts
(1)  128/ 6004082 : 0009                   		nop
(1)  129/ 6004084 :                     		align 4
(1)  130/ 6004084 : 25F8 0004           		ltorg
(1)  131/ 6004088 :                     		
(1)  132/ 6004088 :                     ; ----------------------------
(1)  133/ 6004088 :                     ; Data
(1)  134/ 6004088 :                     ; ----------------------------
(1)  135/ 6004088 :                     
(1)  136/ 6004088 :                     pal_test:
(1)  137/ 6004088 :                     		binclude "game/data/pal.bin"
(1)  138/ 60040A8 :                     		align 4
(1)  139/ 60040A8 : 0000 16E4           art_test:	dc.l .end-art_test
(1)  140/ 60040AC :                     		binclude "game/data/art.bin"
(1)  141/ 600578C :                     .end:
(1)  142/ 600578C :                     		align 4
(1)  143/ 600578C :                     map_test:
(1)  144/ 600578C :                     		binclude "game/data/map.bin"
(1)  145/ 600604C :                     		align 4
(1)  146/ 600604C :                     
(1)  147/    E04C :                     		dephase
(1)  148/    E04C :                     		ltorg
(1)  149/    E04C :                     		;inform 0,"IP Size: %h",(IP_End-IP_Start)
(1)  150/    E04C :                     
      49/    E04C :                     		
      50/    E04C :                     ; ====================================================================
      51/    E04C :                     ; ------------------------------------------------
      52/    E04C :                     ; Padding
      53/    E04C :                     ; ------------------------------------------------
      54/    E04C :                     
      55/    E04C :                     		align $8000
      56/   10000 :                     
 AS V1.42 Beta [Bld 118] - source file disc.asm - page 2 - 10/3/2020 21:30:08


  symbol table (* = unused):
  ------------------------

*ARCHITECTURE :                                        x86_64-unknown-linux - |
 ART_TEST :                 60040A8 C |  ART_TEST.END :             600578C C |
*BIGENDIAN :                      0 - | *BRANCHEXT :                      0 - |
*CASESENSITIVE :                  0 - | *CONSTPI :        3.141592653589793 - |
*CONTROLLER :               60FFC13 - |  CONTROLLER.ARTLOAD :       600402A C |
 CONTROLLER.CLEANUP :       6004006 C |  CONTROLLER.LOOP :          6004054 C |
 CONTROLLER.MAPXLOAD :      6004040 C |  CONTROLLER.MAPYLOAD :      600403C C |
 CONTROLLER.PALLOAD :       600401A C | *DATE :                   10/3/2020 - |
*DOTTEDSTRUCTS :                  0 - | *FALSE :                          0 - |
*FULLPMMU :                       1 - | *HAS64 :                          1 - |
*HASDSP :                         0 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - | *INEXTMODE :                      0 - |
*INLWORDMODE :                    0 - | *INMAXMODE :                      0 - |
*INSRCMODE :                      0 - | *INSUPMODE :                      1 - |
*IP_END :                      12FC C | *IP_START :                     E80 C |
*LISTON :                         3 - |  LITERAL_F_00000000_1 :     600405C C |
 LITERAL_F_00000001_1 :     6004068 C |  LITERAL_F_00000002_1 :     6004070 C |
 LITERAL_L_25E00000_1 :     600406C C |  LITERAL_L_25E06000_1 :     6004058 C |
 LITERAL_L_25E08000_1 :     6004060 C |  LITERAL_L_25F00000_1 :     6004064 C |
 LITERAL_L_25F80004_1 :     6004084 C |  LITERAL_W_0080_1 :         6004076 C |
 LITERAL_W_0800_1 :         6004074 C | *LWRAM :                   20200000 - |
*MACEXP :                         7 - |  MAP_TEST :                 600578C C |
*MOMCPU :                      7600 - | *MOMCPUNAME :                SH7600 - |
*NESTMAX :                      100 - | *PACKING :                        0 - |
*PADDING :                        0 - |  PAL_TEST :                 6004088 C |
*RELAXED :                        0 - | *TIME :                    21:30:08 - |
*TRUE :                           1 - |  VDP2_CRAM :               25F00000 - |
 VDP2_RAM :                25E00000 - |  VDP2_REGS :               25F80000 - |
*VERSION :                     142F - |  VSYNC :                    6004078 C |

     57 symbols
     33 unused symbols

 AS V1.42 Beta [Bld 118] - source file disc.asm - page 3 - 10/3/2020 21:30:08


  codepages:
  ----------

STANDARD (0 changed characters)


0.00 seconds assembly time

    223 lines source file
      2 passes
      0 errors
      0 warnings
